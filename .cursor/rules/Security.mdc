---
description: 
globs: 
alwaysApply: true
---
# Security Guidelines

## 敏感資訊處理

### 環境變數

- 敏感資訊必須使用環境變數儲存
- 開發環境使用 `.env` 檔案（需加入 `.gitignore`）
- 生產環境使用安全的環境變數管理系統

### API Keys 管理

- 不得在程式碼中硬編碼 API Keys
- 使用 Configuration 檔案管理 API Keys 的參考名稱
- API Keys 需要定期更換
- 不同環境使用不同的 API Keys

### 加密相關

- 使用業界標準的加密演算法
- 密碼必須使用單向雜湊（如 bcrypt）
- 敏感資料傳輸必須使用 HTTPS
- 加密金鑰需要安全管理與定期更換

## 資料儲存安全

### 本地儲存

- 敏感資料使用 Keychain 儲存
- UserDefaults 只存放非敏感資訊
- 檔案系統中的敏感資料需要加密
- 定期清理暫存資料

### 資料庫安全

- 資料庫連線資訊需要加密
- 使用參數化查詢防止 SQL 注入
- 定期備份資料庫
- 實作資料庫存取權限控制

## 網路安全

### API 安全

- 實作 API 認證機制
- 使用 OAuth 2.0 或類似的標準
- 實作 API 請求限制
- 驗證所有的輸入資料

### SSL/TLS

- 強制使用 HTTPS
- 使用最新的 TLS 版本
- 定期更新 SSL 憑證
- 實作憑證綁定（Certificate Pinning）

## 使用者認證

### 密碼政策

- 強制使用強密碼
- 實作密碼重試限制
- 提供安全的密碼重設機制
- 定期要求更換密碼

### 登入安全

- 實作多因素認證
- 記錄登入嘗試
- 偵測異常登入行為
- 提供登入通知機制
