# fox-swift-api

> This file is generated by AI, please check the correctness of the content.

**fox-swift-api** 是一個基於 Swift 的網路請求介面，專為 **FoxSwift** 專案設計。本框架採用現代化的 Swift 技術，提供高效能且易於使用的 API 介面。框架整合了 **Vapor** 伺服器框架，並提供了豐富的巨集系統來簡化 API 開發流程。

**fox-swift-api** is a network request interface based on Swift, designed for **FoxSwift** projects. This framework adopts modern Swift technology to provide high-performance and easy-to-use API interfaces. The framework integrates the **Vapor** server framework and provides a rich macro system to simplify the API development process.

## 技術架構 Architecture

### 核心技術 Core Technologies

- **Swift 6.0+**: 使用最新的 Swift 特性，包含 Macro 系統
- **Vapor**: 高效能的 Swift 後端框架
- **Swift Concurrency**: 全面採用 async/await 處理非同步操作
- **Protocol Oriented**: 以 Protocol 為導向的程式設計，提供高度的可擴展性
- **SwiftSyntax**: 用於實作自定義的編譯期巨集
- **Papyrus**: 用於實作 API 介面的編譯期巨集

<br>

- **Swift 6.0+**: Use the latest Swift features, including the Macro system
- **Vapor**: A high-performance Swift backend framework
- **Swift Concurrency**: Adopt async/await for asynchronous operations
- **Protocol Oriented**: Program design oriented by Protocol, providing high scalability
- **SwiftSyntax**: Used to implement custom compile-time macros
- **Papyrus**: Used to implement compile-time macros for API interfaces

### 主要元件

#### APICore

- **ServiceProtocol**: 定義服務層的基本介面
- **ServiceRouteCollection**: 自動化路由註冊系統
- **Request Extensions**: 提供型別安全的請求參數處理
- **RouteError**: 統一的錯誤處理機制
- **@Service Macro**: 自動生成路由與服務層程式碼

<br>

- **ServiceProtocol**: Define the basic interface of the service layer
- **ServiceRouteCollection**: Automatic routing registration system
- **Request Extensions**: Provide type-safe request parameter processing
- **RouteError**: Unified error handling mechanism
- **@Service Macro**: Automatically generate routing and service layer code

#### APIPlugin

- **Service Macro**: 自動生成路由與服務層程式碼
- **編譯期程式碼生成**: 減少重複的樣板程式碼
- **型別安全的路由定義**: 支援 GET、POST、PUT 等 HTTP 方法

<br>

- **Service Macro**: Automatically generate routing and service layer code
- **Compile-time code generation**: Reduce repetitive template code
- **Type-safe routing definition**: Support GET, POST, PUT, etc. HTTP methods

#### FoxSwiftAPI

- **統一的 API 版本控制**: 透過 `FoxSwift.apiVersion` 管理
- **標準化的路由前綴**: 自動加入 `/api/v{version}` 前綴
- **型別安全的內容處理**: 使用 `CodableContent` 協定
- **Macro 系統**: 提供簡單易用的巨集系統來簡化 API 開發流程

<br>

- **Unified API version control**: Manage through `FoxSwift.apiVersion`
- **Standardized routing prefix**: Automatically add `/api/v{version}` prefix
- **Type-safe content processing**: Use `CodableContent` protocol
- **Macro system**: Provide a simple and easy-to-use macro system to simplify API development

### 特色功能 Features

- **型別安全的 API 定義 Type-safe API definition**

  ```swift
  @API
  @Service
  protocol Users {
      @GET("/users")
      func getUsers(limit: Int) async throws -> [User]
  }
  ```

- **自動化的錯誤處理 Automatic error handling**
  - 請求參數驗證
  - 路由參數解析
  - 請求內容解碼

  <br>

  - Request parameter validation
  - Route parameter parsing
  - Request content decoding

  ```swift
  @API
  @Service
  protocol Users {
      @GET("/users")
      func getUsers(limit: Int) async throws -> [User]
  }
  ```

- **測試支援 Test support**
  - 整合 Vapor 測試框架
  - 提供 Mock 功能
  - 支援單元測試與整合測試

  <br>

  - Integrate Vapor test framework
  - Provide Mock functionality
  - Support unit testing and integration testing

## 系統需求 System Requirements

- Swift 6.0 or higher
- iOS 16.0+ / macOS 13.0+
- Xcode 15.0+

## 相依套件 Dependencies

- [Vapor](https://github.com/vapor/vapor)
- [SwiftNIO](https://github.com/apple/swift-nio)
- [SwiftSyntax](https://github.com/apple/swift-syntax)
- [Papyrus](https://github.com/joshuawright11/papyrus)
